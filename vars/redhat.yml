---
# Copyright 2014, Rackspace US, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

nova_qemu_user: qemu
nova_qemu_group: qemu
libvirt_group: libvirt
libvirt_service_name: libvirtd

# Common yum packages
nova_distro_packages:
  - git
  - iptables
  - libxml2
  - systemd-python

nova_devel_distro_packages:
  - libxml2-devel
  - systemd-devel

nova_service_distro_packages:
  - openstack-nova-api
  - openstack-nova-conductor
  - openstack-nova-scheduler
  - python-memcached
  - python2-PyMySQL
  - systemd-devel

nova_service_extra_distro_packages:
  kvm:
    - openstack-nova-compute
    - openstack-nova-migration
  novnc:
    - openstack-nova-novncproxy
  spice:
    - openstack-nova-spicehtml5proxy
  serialconsole:
    - openstack-nova-serialproxy

nova_compute_packages:
  - dosfstools
  - genisoimage
  - kpartx
  - python-libguestfs
  - sysfsutils

nova_compute_barbican_distro_packages:
  - cryptsetup

nova_compute_kvm_distro_packages:
  - libvirt-daemon-kvm
  - "qemu-kvm{% if ansible_distribution_major_version|int <= 7 %}-ev{% endif %}"
  - libvirt-client
  - libvirt-python
  - nfs-utils
  - python-libguestfs
  - "qemu-img{% if ansible_distribution_major_version|int <= 7 %}-ev{% endif %}"
  - "{{ (ansible_architecture == 'aarch64') | ternary('AAVMF', 'OVMF') }}"

nova_compute_kvm_packages_to_symlink:
  - "{% if ansible_distribution_major_version|int <= 7 %}libvirt-python{% else %}python2-libvirt{% endif %}"
  - "python{% if ansible_distribution_major_version|int > 7 %}2{% endif %}-libguestfs"

nova_compute_ksm_packages:
  - ksmtuned

nova_compute_oslomsg_amqp1_distro_packages:
  - cyrus-sasl-plain
  - cyrus-sasl-md5
